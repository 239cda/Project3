<html>
<head>
<meta charset="utf-8">
<title>Project 3</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.min.js" charset="utf-8"></script>
<style type="text/css">
#legendBoxAttributes {
	fill: none;
	stroke:grey;
	shape-rendering: crispEdges;
	width: 200;
	height: 200;
}
text { 
			font-family: Arial; 
			font-size: 15px;
		}
		.axis path, .axis line {
			fill: none;
			stroke: black;
			shape-rendering: crispEdges;
		}
		.tick text {
			fill: black;
			font-size: 11px;
		}
		  .lines {
            stroke: black;
        }
.menu{
	cursor:pointer;
	position: absolute;
	top : 50px;
	font-size: 18px;
}
.submenu{
	cursor:pointer;
	position: absolute;
	top : 52px;
	font-size: 13px;
}
a:link {
    text-decoration: none;
	color: black;
}

a:visited {
    text-decoration: none;
	color: black;
	
}

</style>
</head>
<text class="pageTitle" id="pageTitle" style="font-size: 25px;position: absolute; left: 360px; top: 10px;" >Total number of responders received each degree</text>
<a href= "https://239cda.github.io/Project3/home.html" text class="menu" style="positon:absolute; left: 350px;">Back to Top</text></a>
<a href= "https://239cda.html" text class="menu" onclick ="" style="positon:absolute; left: 550px;">Explore</text>
<a href= "https://239cda.github.io/Project3/timechart.html" text class="submenu" style="positon:absolute; left: 670px;">By Time</text></a>
<a href= "https://239cda.github.io/Project3/scatter.html"text class="submenu" style="positon:absolute; left: 750px;">By Variables</text></a>
<a href= "https://239cda.html"text class="submenu" style="positon:absolute; left: 850px;">By Detail</text></a>


<img src="timeline.png" style="position: absolute; left: 80px; top: 640px;" ></img>

<select id="var1" style="position: absolute; left: 150px; top: 1650px">
<option selected="selected">Father Highest Degree</option>
<option>Mother Highest Degree</option>
<option>Spouse Highest Degree</option>
<option>Current Income</option>

</select>
<!--
<text id="nav">X axis</text>
<text id="nav">Y axis</text>
<text id="nav">Sex</text>
<text id="nav">Race</text>
<text id="explain">Excluding answers "Don't know" "No answer" "Not applicable"</text>
-->
<body>
<script>
//load data file
//select 100 rows, based on random numbers generated by code --> and maybe save it somewhere else. 
//first of all, load file with columns related to income
//check year column, and based on that column, save data into separate arrays. 

var dataset = [];
var years = [1972, 1976, 1980, 1984, 1988, 1993, 1996, 2000, 2004, 2006, 2010, 2014];
var income2000 = [];
Papa.parse('TotalYearData.csv', {
			download: true,
			header: true,
			dynamicTyping: true,
			complete: function(results) 
			{
				// loop through all the rows in file
				//at the same time, use if statement to save only income data and so on
				for (var i=0; i < results.data.length; i++)
				{
					var record = results.data[i];
					//var value = record[4];
					// make an object to store data for the current locality
					var Array = {
					    name: record.ID,
						year: record.YEAR,
						//rowNum : rowNumber[i],
						income16: record.INCOM16,
						incomeNow: record.CONINC,
						incomeNumber2000Pro: 0,
						degreeMe: record.DEGREE,
						degreeP: record.PADEG,
						degreeM: record.MADEG,
						degreeS: record.SPDEG,
						momWorked: record.MAWRKGRW,
						womenWorking: record.FEFAM,
						confidencePress: record.CONPRESS,
						confidenceLaw: record.CONJUDGE,
						confidenceCongress: record.CONLEGIS
					}
					dataset[i] = Array;
					income2000[i] = Array.incomeNumber2000;
				}
				income2000Max(dataset);
				drawBar1("degreeP");
				drawBar2("degreeP");
				drawBar3("degreeP");
				drawBar4("degreeP");
				drawBar5("degreeP");

				
				
				}//has to insert number in number row aarray
})
//----------------data load ends here--------------------


				d3.select("#var1")
				   .on('change', function(){
					   //d3.selectAll("svg").selectAll('*').remove();
					   var selection = document.getElementById('var1');
					   var selectedVariable= selection.options[selection.selectedIndex].value;
					   var selectedIndex = document.getElementById("var1").selectedIndex;
						
						if(selectedIndex == 0) {
						drawBar1("degreeP");
						drawBar2("degreeP");
						drawBar3("degreeP");
						drawBar4("degreeP");
						drawBar5("degreeP");
					   }
					   else if(selectedIndex == 1) {
						drawBar1("degreeM");
						drawBar2("degreeM");
						drawBar3("degreeM");
						drawBar4("degreeM");
						drawBar5("degreeM");
					   }
					    else if(selectedIndex == 2) {
						drawBar1("degreeS");
						drawBar2("degreeS");
						drawBar3("degreeS");
						drawBar4("degreeS");
						drawBar5("degreeS");
					   }
					   else if(selectedIndex == 3) {
						drawBar1("degreeS");
						drawBar2("degreeS");
						drawBar3("degreeS");
						drawBar4("degreeS");
						drawBar5("degreeS");
					   }
				   })


//draw multiple svg line graphs
//first create svg fieldset
//draw 3 bar graphs
function drawBar1(variable){
d3.select("body").selectAll('svg').remove();
var svgW = 1400;
var svgH = 300;
var paddingL = 80;
var paddingT = 100;
var chartW = 1000;	
var chartH = 250;	
//calculate and create array for each line

//for each array, goes the total number of answers in the order of year NORMALIZED
//get total number of both the answers and total answer for years
var linedata1 = [];
var linedata2 = [];
var linedata3 = [];
var linedata4 = [];
var linedata5 = [];

var count1 = 0;
var count2 = 0;
var count3 = 0;
var count4 = 0;
var count5 = 0;
var yearCount = 0;

//input the variable to show in every graph in page
for (a=0; a<years.length;a++){
	for (i=0; i<dataset.length; i++) {
	//less than high school
		if (dataset[i].year == years[a]) {
			if (dataset[i][variable] == 4) {
				if (dataset[i].degreeMe == 0) {
					count1 = count1 + 1;
					}
				else if(dataset[i].degreeMe == 1) {
					count2 = count2 + 1;
					}
				else if(dataset[i].degreeMe == 2) {
					count3 = count3 + 1;
					}
				else if(dataset[i].degreeMe == 3) {
					count4 = count4 + 1;
					}
				else if(dataset[i].degreeMe == 4) {
					count5 = count5 + 1;
				}
			}
		yearCount = yearCount + 1;
		}	
	}
	count1 = count1 / yearCount;
	count2 = count2 / yearCount;
	count3 = count3 / yearCount;
	count4 = count4 / yearCount;
	count5 = count5 / yearCount;
	
	linedata1.push(count1);
	linedata2.push(count2);
	linedata3.push(count3);
	linedata4.push(count4);
	linedata5.push(count5);
	
	yearCount = 0;
}

var findMax = linedata1.concat(linedata2, linedata3, linedata4, linedata5);

var svg = d3.select("body")
            .append("svg")
            .attr("width", svgW)
            .attr("height", svgH)
			.attr("translate", "transform(80, 100)")
			


var yScale = d3.scale.linear()
			.domain([0, d3.max(findMax)])
			.range([chartH, paddingT]);	
			
	
var lineW = chartW / (linedata1.length -1);			

var lineValue = d3.svg.line()
	                .x(function(d, i) { 
					return paddingL + (lineW * i)})
					//this should apply to dataset with less years
					.y(function(d){return yScale(d)})
					.interpolate("linear");		
	
var lines = svg.append("g")
		//when there should be two lines.
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata1))
                     .attr("stroke", "#d73027")
                     .attr("stroke-width", 2)
					 .attr("class", "line1a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata2))
                     .attr("stroke", "#ff661a")
                     .attr("stroke-width", 2)
					 .attr("class", "line2a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata3))
                     .attr("stroke", "#8c510a")
                     .attr("stroke-width", 2)
					 .attr("class", "line3a")
                     .attr("fill", "none");	
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata4))
                     .attr("stroke", "#1b7837")
                     .attr("stroke-width", 2)
					 .attr("class", "line4a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata5))
                     .attr("stroke", "#cc1aba")
                     .attr("stroke-width", 2)
					 .attr("class", "line5a")
                     .attr("fill", "none");		 
		  ;
	

		  
		  
		  // create x axis
			var timeScale = d3.time.scale()
				.domain([new Date(1972, 1, 1), new Date(2014, 1, 1)])
				.range([paddingL, chartW + paddingL])

			var xAxis = d3.svg.axis()
				.scale(timeScale)
				.orient('bottom');

			// create x axis
			svg.append("g")
				.attr('class', 'axis')
				.attr("transform", "translate(0,"+chartH + ")")
				.call(xAxis);

			var yAxis = d3.svg.axis()
				.scale(yScale)
				.orient('left');

			svg.append("g")
				.attr('class', 'axis')
				.attr('transform', "translate("+paddingL +",0)")
				.call(yAxis);	

var textArray = ["Father","Mother","Spouse"];
var selectedIndex = document.getElementById("var1").selectedIndex;
				
svg.append("text")
	.text(textArray[selectedIndex] +"'s highest degree: Graduate")
	.attr("x", chartW/2)
	.attr("y", chartH + 45)
	
var rectX = svgW - 100 - 200;	
var rectY = svgH - chartH;			
var legendPadding = 10;	
var circleX = rectX + legendPadding + 5;
var circleY = rectY + 30 - 12;
var circleR = 8;
var textX = circleX + legendPadding + 5;
var textY = circleY + 3.5;
var dotsColor = ["#cc1aba", "#1b7837","#8c510a", "#ff661a", "#d73027"];
var legendTextIncome16 = ["Below high school","High school","Associate/Junior college","Bachelor's","Graduate"]


//make a legend box
var legendBox = svg.append("rect")
					.attr("x", rectX)
					.attr("y", rectY)
					.attr("id", "legendBoxAttributes")
					
var legendCircle = svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY)
					.attr("r", circleR)
					.attr("fill", dotsColor[0])
	
				   svg.append("text")
					.text(legendTextIncome16[4])			
					.attr("x", circleX + legendPadding + 5)
					.attr("font-size", 14)
					.attr("y", circleY + 3.5);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 27)
					.attr("r", circleR)
					.attr("fill", dotsColor[1])

				   svg.append("text")
					.text(legendTextIncome16[3])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 27);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 52)
					.attr("r", circleR)
					.attr("fill", dotsColor[2])

				   svg.append("text")
					.text(legendTextIncome16[2])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 52);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 79)
					.attr("r", circleR)
					.attr("fill", dotsColor[3])

				   svg.append("text")
					.text(legendTextIncome16[1])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 79);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 106)
					.attr("r", circleR)
					.attr("fill", dotsColor[4])
				   svg.append("text")
					.text(legendTextIncome16[0])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 106);

	
	
	
}
function drawBar2(variable){
var svgW = 1400;
var svgH = 400;
var paddingL = 80;
var paddingT = 100;
var chartW = 1000;	
var chartH = 250;	
//calculate and create array for each line

//for each array, goes the total number of answers in the order of year NORMALIZED
//get total number of both the answers and total answer for years
var linedata1 = [];
var linedata2 = [];
var linedata3 = [];
var linedata4 = [];
var linedata5 = [];

var count1 = 0;
var count2 = 0;
var count3 = 0;
var count4 = 0;
var count5 = 0;
var yearCount = 0;

//input the variable to show in every graph in page
for (a=0; a<years.length;a++){
	for (i=0; i<dataset.length; i++) {
	//less than high school
		if (dataset[i].year == years[a]) {
			if (dataset[i][variable] == 3) {
				if (dataset[i].degreeMe == 0) {
					count1 = count1 + 1;
					}
				else if(dataset[i].degreeMe == 1) {
					count2 = count2 + 1;
					}
				else if(dataset[i].degreeMe == 2) {
					count3 = count3 + 1;
					}
				else if(dataset[i].degreeMe == 3) {
					count4 = count4 + 1;
					}
				else if(dataset[i].degreeMe == 4) {
					count5 = count5 + 1;
				}
			}
		yearCount = yearCount + 1;
		}	
	}
	count1 = count1 / yearCount;
	count2 = count2 / yearCount;
	count3 = count3 / yearCount;
	count4 = count4 / yearCount;
	count5 = count5 / yearCount;
	
	linedata1.push(count1);
	linedata2.push(count2);
	linedata3.push(count3);
	linedata4.push(count4);
	linedata5.push(count5);
	console.log(yearCount)
	yearCount = 0;
}

var findMax = linedata1.concat(linedata2, linedata3, linedata4, linedata5);

var svg = d3.select("body")
            .append("svg")
            .attr("width", svgW)
            .attr("height", svgH)
			.attr("translate", "transform(80, 100)")
			


var yScale = d3.scale.linear()
			.domain([0, d3.max(findMax)])
			.range([chartH, paddingT]);	
			
	
var lineW = chartW / (linedata1.length -1);			

var lineValue = d3.svg.line()
	                .x(function(d, i) { 
					return paddingL + (lineW * i)})
					//this should apply to dataset with less years
					.y(function(d){return yScale(d)})
					.interpolate("linear");		
	
var lines = svg.append("g")
		//when there should be two lines.
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata1))
                     .attr("stroke", "#d73027")
                     .attr("stroke-width", 2)
					 .attr("class", "line1a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata2))
                     .attr("stroke", "#ff661a")
                     .attr("stroke-width", 2)
					 .attr("class", "line2a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata3))
                     .attr("stroke", "#8c510a")
                     .attr("stroke-width", 2)
					 .attr("class", "line3a")
                     .attr("fill", "none");	
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata4))
                     .attr("stroke", "#1b7837")
                     .attr("stroke-width", 2)
					 .attr("class", "line4a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata5))
                     .attr("stroke", "#cc1aba")
                     .attr("stroke-width", 2)
					 .attr("class", "line5a")
                     .attr("fill", "none");		 
		  ;
	

		  
		  
		  // create x axis
			var timeScale = d3.time.scale()
				.domain([new Date(1972, 1, 1), new Date(2014, 1, 1)])
				.range([paddingL, chartW + paddingL])

			var xAxis = d3.svg.axis()
				.scale(timeScale)
				.orient('bottom');

			// create x axis
			svg.append("g")
				.attr('class', 'axis')
				.attr("transform", "translate(0,"+chartH + ")")
				.call(xAxis);

			var yAxis = d3.svg.axis()
				.scale(yScale)
				.orient('left');

			svg.append("g")
				.attr('class', 'axis')
				.attr('transform', "translate("+paddingL +",0)")
				.call(yAxis);	
				
var textArray = ["Father","Mother","Spouse"];
var selectedIndex = document.getElementById("var1").selectedIndex;
				
svg.append("text")
	.text(textArray[selectedIndex] +"'s highest degree: Bachelor's")
	.attr("x", chartW/2)
	.attr("y", chartH + 45)
	
var rectX = svgW - 100 - 200;	
var rectY = svgH - chartH - 100;			
var legendPadding = 10;	
var circleX = rectX + legendPadding + 5;
var circleY = rectY + 30 - 12;
var circleR = 8;
var textX = circleX + legendPadding + 5;
var textY = circleY + 3.5;
var dotsColor = ["#cc1aba", "#1b7837","#8c510a", "#ff661a", "#d73027"];
var legendTextIncome16 = ["Below high school","High school","Associate/Junior college","Bachelor's","Graduate"]


//make a legend box
var legendBox = svg.append("rect")
					.attr("x", rectX)
					.attr("y", rectY)
					.attr("id", "legendBoxAttributes")
					
var legendCircle = svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY)
					.attr("r", circleR)
					.attr("fill", dotsColor[0])
	
				   svg.append("text")
					.text(legendTextIncome16[4])			
					.attr("x", circleX + legendPadding + 5)
					.attr("font-size", 14)
					.attr("y", circleY + 3.5);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 27)
					.attr("r", circleR)
					.attr("fill", dotsColor[1])

				   svg.append("text")
					.text(legendTextIncome16[3])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 27);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 52)
					.attr("r", circleR)
					.attr("fill", dotsColor[2])

				   svg.append("text")
					.text(legendTextIncome16[2])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 52);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 79)
					.attr("r", circleR)
					.attr("fill", dotsColor[3])

				   svg.append("text")
					.text(legendTextIncome16[1])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 79);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 106)
					.attr("r", circleR)
					.attr("fill", dotsColor[4])
				   svg.append("text")
					.text(legendTextIncome16[0])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 106);	
	
	
}
function drawBar3(variable){
var svgW = 1400;
var svgH = 300;
var paddingL = 80;
var paddingT = 100;
var chartW = 1000;	
var chartH = 250;	
//calculate and create array for each line

//for each array, goes the total number of answers in the order of year NORMALIZED
//get total number of both the answers and total answer for years
var linedata1 = [];
var linedata2 = [];
var linedata3 = [];
var linedata4 = [];
var linedata5 = [];

var count1 = 0;
var count2 = 0;
var count3 = 0;
var count4 = 0;
var count5 = 0;
var yearCount = 0;

//input the variable to show in every graph in page
for (a=0; a<years.length;a++){
	for (i=0; i<dataset.length; i++) {
	//less than high school
		if (dataset[i].year == years[a]) {
			if (dataset[i][variable] == 2) {
				if (dataset[i].degreeMe == 0) {
					count1 = count1 + 1;
					}
				else if(dataset[i].degreeMe == 1) {
					count2 = count2 + 1;
					}
				else if(dataset[i].degreeMe == 2) {
					count3 = count3 + 1;
					}
				else if(dataset[i].degreeMe == 3) {
					count4 = count4 + 1;
					}
				else if(dataset[i].degreeMe == 4) {
					count5 = count5 + 1;
				}
			}
		yearCount = yearCount + 1;
		}	
	}
	count1 = count1 / yearCount;
	count2 = count2 / yearCount;
	count3 = count3 / yearCount;
	count4 = count4 / yearCount;
	count5 = count5 / yearCount;
	
	linedata1.push(count1);
	linedata2.push(count2);
	linedata3.push(count3);
	linedata4.push(count4);
	linedata5.push(count5);
	
	yearCount = 0;
}

var findMax = linedata1.concat(linedata2, linedata3, linedata4, linedata5);

var svg = d3.select("body")
            .append("svg")
            .attr("width", svgW)
            .attr("height", svgH)
			.attr("translate", "transform(80, 0)")
			


var yScale = d3.scale.linear()
			.domain([0, d3.max(findMax)])
			.range([chartH, paddingT]);	
			
	
var lineW = chartW / (linedata1.length -1);			

var lineValue = d3.svg.line()
	                .x(function(d, i) { 
					return paddingL + (lineW * i)})
					//this should apply to dataset with less years
					.y(function(d){return yScale(d)})
					.interpolate("linear");		
	
var lines = svg.append("g")
		//when there should be two lines.
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata1))
                     .attr("stroke", "#d73027")
                     .attr("stroke-width", 2)
					 .attr("class", "line1a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata2))
                     .attr("stroke", "#ff661a")
                     .attr("stroke-width", 2)
					 .attr("class", "line2a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata3))
                     .attr("stroke", "#8c510a")
                     .attr("stroke-width", 2)
					 .attr("class", "line3a")
                     .attr("fill", "none");	
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata4))
                     .attr("stroke", "#1b7837")
                     .attr("stroke-width", 2)
					 .attr("class", "line4a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata5))
                     .attr("stroke", "#cc1aba")
                     .attr("stroke-width", 2)
					 .attr("class", "line5a")
                     .attr("fill", "none");		 
		  ;
	

		  
		  
		  // create x axis
			var timeScale = d3.time.scale()
				.domain([new Date(1972, 1, 1), new Date(2014, 1, 1)])
				.range([paddingL, chartW + paddingL])

			var xAxis = d3.svg.axis()
				.scale(timeScale)
				.orient('bottom');

			// create x axis
			svg.append("g")
				.attr('class', 'axis')
				.attr("transform", "translate(0,"+chartH + ")")
				.call(xAxis);

			var yAxis = d3.svg.axis()
				.scale(yScale)
				.orient('left');

			svg.append("g")
				.attr('class', 'axis')
				.attr('transform', "translate("+paddingL +",0)")
				.call(yAxis);	
				
var textArray = ["Father","Mother","Spouse"];
var selectedIndex = document.getElementById("var1").selectedIndex;
				
svg.append("text")
	.text(textArray[selectedIndex] +"'s highest degree: Associate/Junior college")
	.attr("x", chartW/2)
	.attr("y", chartH + 45)
	
var rectX = svgW - 100 - 200;	
var rectY = svgH - chartH;			
var legendPadding = 10;	
var circleX = rectX + legendPadding + 5;
var circleY = rectY + 30 - 12;
var circleR = 8;
var textX = circleX + legendPadding + 5;
var textY = circleY + 3.5;
var dotsColor = ["#cc1aba", "#1b7837","#8c510a", "#ff661a", "#d73027"];
var legendTextIncome16 = ["Below high school","High school","Associate/Junior college","Bachelor's","Graduate"]


//make a legend box
var legendBox = svg.append("rect")
					.attr("x", rectX)
					.attr("y", rectY)
					.attr("id", "legendBoxAttributes")
					
var legendCircle = svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY)
					.attr("r", circleR)
					.attr("fill", dotsColor[0])
	
				   svg.append("text")
					.text(legendTextIncome16[4])			
					.attr("x", circleX + legendPadding + 5)
					.attr("font-size", 14)
					.attr("y", circleY + 3.5);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 27)
					.attr("r", circleR)
					.attr("fill", dotsColor[1])

				   svg.append("text")
					.text(legendTextIncome16[3])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 27);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 52)
					.attr("r", circleR)
					.attr("fill", dotsColor[2])

				   svg.append("text")
					.text(legendTextIncome16[2])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 52);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 79)
					.attr("r", circleR)
					.attr("fill", dotsColor[3])

				   svg.append("text")
					.text(legendTextIncome16[1])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 79);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 106)
					.attr("r", circleR)
					.attr("fill", dotsColor[4])
				   svg.append("text")
					.text(legendTextIncome16[0])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 106);

	
				
}
function drawBar4(variable){
var svgW = 1400;
var svgH = 300;
var paddingL = 80;
var paddingT = 100;
var chartW = 1000;	
var chartH = 250;	
//calculate and create array for each line

//for each array, goes the total number of answers in the order of year NORMALIZED
//get total number of both the answers and total answer for years
var linedata1 = [];
var linedata2 = [];
var linedata3 = [];
var linedata4 = [];
var linedata5 = [];

var count1 = 0;
var count2 = 0;
var count3 = 0;
var count4 = 0;
var count5 = 0;
var yearCount = 0;

//input the variable to show in every graph in page
for (a=0; a<years.length;a++){
	for (i=0; i<dataset.length; i++) {
	//less than high school
		if (dataset[i].year == years[a]) {
			if (dataset[i][variable]== 1) {
				if (dataset[i].degreeMe == 0) {
					count1 = count1 + 1;
					}
				else if(dataset[i].degreeMe == 1) {
					count2 = count2 + 1;
					}
				else if(dataset[i].degreeMe == 2) {
					count3 = count3 + 1;
					}
				else if(dataset[i].degreeMe == 3) {
					count4 = count4 + 1;
					}
				else if(dataset[i].degreeMe == 4) {
					count5 = count5 + 1;
				}
			}
		yearCount = yearCount + 1;
		}	
	}
	count1 = count1 / yearCount;
	count2 = count2 / yearCount;
	count3 = count3 / yearCount;
	count4 = count4 / yearCount;
	count5 = count5 / yearCount;
	
	linedata1.push(count1);
	linedata2.push(count2);
	linedata3.push(count3);
	linedata4.push(count4);
	linedata5.push(count5);
	
	yearCount = 0;
}

var findMax = linedata1.concat(linedata2, linedata3, linedata4, linedata5);

var svg = d3.select("body")
            .append("svg")
            .attr("width", svgW)
            .attr("height", svgH)
			.attr("translate", "transform(80, 100)")
			


var yScale = d3.scale.linear()
			.domain([0, d3.max(findMax)])
			.range([chartH, paddingT]);	
			
	
var lineW = chartW / (linedata1.length -1);			

var lineValue = d3.svg.line()
	                .x(function(d, i) { 
					return paddingL + (lineW * i)})
					//this should apply to dataset with less years
					.y(function(d){return yScale(d)})
					.interpolate("linear");		
	
var lines = svg.append("g")
		//when there should be two lines.
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata1))
                     .attr("stroke", "#d73027")
                     .attr("stroke-width", 2)
					 .attr("class", "line1a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata2))
                     .attr("stroke", "#ff661a")
                     .attr("stroke-width", 2)
					 .attr("class", "line2a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata3))
                     .attr("stroke", "#8c510a")
                     .attr("stroke-width", 2)
					 .attr("class", "line3a")
                     .attr("fill", "none");	
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata4))
                     .attr("stroke", "#1b7837")
                     .attr("stroke-width", 2)
					 .attr("class", "line4a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata5))
                     .attr("stroke", "#cc1aba")
                     .attr("stroke-width", 2)
					 .attr("class", "line5a")
                     .attr("fill", "none");		 
		  ;
	

		  
		  
		  // create x axis
			var timeScale = d3.time.scale()
				.domain([new Date(1972, 1, 1), new Date(2014, 1, 1)])
				.range([paddingL, chartW + paddingL])

			var xAxis = d3.svg.axis()
				.scale(timeScale)
				.orient('bottom');

			// create x axis
			svg.append("g")
				.attr('class', 'axis')
				.attr("transform", "translate(0,"+chartH + ")")
				.call(xAxis);

			var yAxis = d3.svg.axis()
				.scale(yScale)
				.orient('left');

			svg.append("g")
				.attr('class', 'axis')
				.attr('transform', "translate("+paddingL +",0)")
				.call(yAxis);	
				
var textArray = ["Father","Mother","Spouse"];
var selectedIndex = document.getElementById("var1").selectedIndex;
				
svg.append("text")
	.text(textArray[selectedIndex] +"'s highest degree: High school")
	.attr("x", chartW/2)
	.attr("y", chartH + 45)
	
var rectX = svgW - 100 - 200;	
var rectY = svgH - chartH;			
var legendPadding = 10;	
var circleX = rectX + legendPadding + 5;
var circleY = rectY + 30 - 12;
var circleR = 8;
var textX = circleX + legendPadding + 5;
var textY = circleY + 3.5;
var dotsColor = ["#cc1aba", "#1b7837","#8c510a", "#ff661a", "#d73027"];
var legendTextIncome16 = ["Below high school","High school","Associate/Junior college","Bachelor's","Graduate"]


//make a legend box
var legendBox = svg.append("rect")
					.attr("x", rectX)
					.attr("y", rectY)
					.attr("id", "legendBoxAttributes")
					
var legendCircle = svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY)
					.attr("r", circleR)
					.attr("fill", dotsColor[0])
	
				   svg.append("text")
					.text(legendTextIncome16[4])			
					.attr("x", circleX + legendPadding + 5)
					.attr("font-size", 14)
					.attr("y", circleY + 3.5);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 27)
					.attr("r", circleR)
					.attr("fill", dotsColor[1])

				   svg.append("text")
					.text(legendTextIncome16[3])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 27);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 52)
					.attr("r", circleR)
					.attr("fill", dotsColor[2])

				   svg.append("text")
					.text(legendTextIncome16[2])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 52);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 79)
					.attr("r", circleR)
					.attr("fill", dotsColor[3])

				   svg.append("text")
					.text(legendTextIncome16[1])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 79);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 106)
					.attr("r", circleR)
					.attr("fill", dotsColor[4])
				   svg.append("text")
					.text(legendTextIncome16[0])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 106);	
	
}
function drawBar5(variable){
var svgW = 1400;
var svgH = 300;
var paddingL = 80;
var paddingT = 100;
var chartW = 1000;	
var chartH = 250;	
//calculate and create array for each line

//for each array, goes the total number of answers in the order of year NORMALIZED
//get total number of both the answers and total answer for years
var linedata1 = [];
var linedata2 = [];
var linedata3 = [];
var linedata4 = [];
var linedata5 = [];

var count1 = 0;
var count2 = 0;
var count3 = 0;
var count4 = 0;
var count5 = 0;
var yearCount = 0;

//input the variable to show in every graph in page
for (a=0; a<years.length;a++){
	for (i=0; i<dataset.length; i++) {
	//less than high school
		if (dataset[i].year == years[a]) {
			if (dataset[i][variable] == 0) {
				if (dataset[i].degreeMe == 0) {
					count1 = count1 + 1;
					}
				else if(dataset[i].degreeMe == 1) {
					count2 = count2 + 1;
					}
				else if(dataset[i].degreeMe == 2) {
					count3 = count3 + 1;
					}
				else if(dataset[i].degreeMe == 3) {
					count4 = count4 + 1;
					}
				else if(dataset[i].degreeMe == 4) {
					count5 = count5 + 1;
				}
			}
		yearCount = yearCount + 1;
		}	
	}
	count1 = count1 / yearCount;
	count2 = count2 / yearCount;
	count3 = count3 / yearCount;
	count4 = count4 / yearCount;
	count5 = count5 / yearCount;
	
	linedata1.push(count1);
	linedata2.push(count2);
	linedata3.push(count3);
	linedata4.push(count4);
	linedata5.push(count5);
	
	yearCount = 0;
}

var findMax = linedata1.concat(linedata2, linedata3, linedata4, linedata5);

var svg = d3.select("body")
            .append("svg")
            .attr("width", svgW)
            .attr("height", svgH)
			.attr("translate", "transform(80, 100)")
			


var yScale = d3.scale.linear()
			.domain([0, d3.max(findMax)])
			.range([chartH, paddingT]);	
			
	
var lineW = chartW / (linedata1.length -1);			

var lineValue = d3.svg.line()
	                .x(function(d, i) { 
					return paddingL + (lineW * i)})
					//this should apply to dataset with less years
					.y(function(d){return yScale(d)})
					.interpolate("linear");		
	
var lines = svg.append("g")
		//when there should be two lines.
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata1))
                     .attr("stroke", "#d73027")
                     .attr("stroke-width", 2)
					 .attr("class", "line1a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata2))
                     .attr("stroke", "#ff661a")
                     .attr("stroke-width", 2)
					 .attr("class", "line2a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata3))
                     .attr("stroke", "#8c510a")
                     .attr("stroke-width", 2)
					 .attr("class", "line3a")
                     .attr("fill", "none");	
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata4))
                     .attr("stroke", "#1b7837")
                     .attr("stroke-width", 2)
					 .attr("class", "line4a")
                     .attr("fill", "none");
				lines.append("path")
	                 .attr("class", "line")
                     .attr("d", lineValue(linedata5))
                     .attr("stroke", "#cc1aba")
                     .attr("stroke-width", 2)
					 .attr("class", "line5a")
                     .attr("fill", "none");		 
		  ;
	

		  
		  
		  // create x axis
			var timeScale = d3.time.scale()
				.domain([new Date(1972, 1, 1), new Date(2014, 1, 1)])
				.range([paddingL, chartW + paddingL])

			var xAxis = d3.svg.axis()
				.scale(timeScale)
				.orient('bottom');

			// create x axis
			svg.append("g")
				.attr('class', 'axis')
				.attr("transform", "translate(0,"+chartH + ")")
				.call(xAxis);

			var yAxis = d3.svg.axis()
				.scale(yScale)
				.orient('left');

			svg.append("g")
				.attr('class', 'axis')
				.attr('transform', "translate("+paddingL +",0)")
				.call(yAxis);	
				
var textArray = ["Father","Mother","Spouse"];
var selectedIndex = document.getElementById("var1").selectedIndex;
				
svg.append("text")
	.text(textArray[selectedIndex] +"'s highest degree: Below high school")
	.attr("x", chartW/2)
	.attr("y", chartH + 45)
	
var rectX = svgW - 100 - 200;	
var rectY = svgH - chartH;			
var legendPadding = 10;	
var circleX = rectX + legendPadding + 5;
var circleY = rectY + 30 - 12;
var circleR = 8;
var textX = circleX + legendPadding + 5;
var textY = circleY + 3.5;
var dotsColor = ["#cc1aba", "#1b7837","#8c510a", "#ff661a", "#d73027"];
var legendTextIncome16 = ["Below high school","High school","Associate/Junior college","Bachelor's","Graduate"]


//make a legend box
var legendBox = svg.append("rect")
					.attr("x", rectX)
					.attr("y", rectY)
					.attr("id", "legendBoxAttributes")
					
var legendCircle = svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY)
					.attr("r", circleR)
					.attr("fill", dotsColor[0])
	
				   svg.append("text")
					.text(legendTextIncome16[4])			
					.attr("x", circleX + legendPadding + 5)
					.attr("font-size", 14)
					.attr("y", circleY + 3.5);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 27)
					.attr("r", circleR)
					.attr("fill", dotsColor[1])

				   svg.append("text")
					.text(legendTextIncome16[3])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 27);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 52)
					.attr("r", circleR)
					.attr("fill", dotsColor[2])

				   svg.append("text")
					.text(legendTextIncome16[2])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 52);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 79)
					.attr("r", circleR)
					.attr("fill", dotsColor[3])

				   svg.append("text")
					.text(legendTextIncome16[1])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 79);
					
				svg.append("circle")
					.attr("cx", circleX)
					.attr("cy", circleY + 106)
					.attr("r", circleR)
					.attr("fill", dotsColor[4])
				   svg.append("text")
					.text(legendTextIncome16[0])			
					.attr("x", textX)
					.attr("font-size", 14)
					.attr("y", textY + 106);	
	
}
function runCount (degreeP) {
	for (i=0; i<years.length;i++){
	count(years[i], degreeP);
	}
}

function count(yearNumber, count1, count2, count3, count4, count5, yearCount) {
	for (i=0; i<dataset.length; i++) {
	//less than high school
		if (dataset[i].year == yearNumber) {
			if (dataset[i].degreeP == 0) {
				count1 = count1 + 1;
				}
			else if(dataset[i].degreeP == 1) {
				count2 = count2 + 1;
				}
			else if(dataset[i].degreeP == 2) {
				count3 = count3 + 1;
				}
			else if(dataset[i].degreeP == 3) {
				count4 = count4 + 1;
				}
			else if(dataset[i].degreeP == 4) {
				count5 = count5 + 1;
			}
		yearCount = yearCount + 1;
		}	
	}
	count1 = count1 / yearCount;
	count2 = count2 / yearCount;
	count3 = count3 / yearCount;
	count4 = count4 / yearCount;
	count5 = count5 / yearCount;
	
	linedata1.push(count1);
	linedata2.push(count2);
	linedata3.push(count3);
	linedata4.push(count4);
	linedata5.push(count5);
}
function income2000Max(familyIncome16From0)  {
	var level = Math.floor(d3.max(income2000)) / 5;
	for (i=0;i<familyIncome16From0.length;i++){
		if (familyIncome16From0[i].incomeNumber2000 < level){familyIncome16From0[i].incomeNumber2000Pro = 1}
		else if (familyIncome16From0[i].incomeNumber2000 < level * 2){familyIncome16From0[i].incomeNumber2000Pro =  2}
		else if (familyIncome16From0[i].incomeNumber2000 < level * 3){familyIncome16From0[i].incomeNumber2000Pro =  3}
		else if (familyIncome16From0[i].incomeNumber2000 < level * 4){familyIncome16From0[i].incomeNumber2000Pro =  4}
		else if (familyIncome16From0[i].incomeNumber2000 >= level * 4){familyIncome16From0[i].incomeNumber2000Pro = 5}
	} 
	
}
</script>
</body>

</html>
